{"version":3,"sources":["contest.coffee"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["Array.range = (a, b, step)->\n    A = []\n    if(typeof a == 'number')\n        A[0] = a\n        step = step || 1;\n        while(a + step <= b)\n            A[A.length] = a += step\n    else\n        s = 'abcdefghijklmnopqrstuvwxyz';\n        if(a is a.toUpperCase())\n            b = b.toUpperCase()\n            s = s.toUpperCase()\n        s = s.substring(s.indexOf(a), s.indexOf(b) + 1)\n        A = s.split('')\n    A\n\nif (window.Vue && $('#contest-entries').length)\n    apiURL = $('meta[name=\"ws::contest.entries\"]').attr('content')\n    contestId = $('meta[name=\"ws::contest\"]').attr('content')\n    token = $('meta[name=\"csrf_token\"]').attr('content')\n    window.contest = new Vue({\n        el: '#contest-entries'\n        data: {\n            entries: [],\n            currentPage: 1,\n            totalPages: 1,\n            pages: [],\n        },\n        created: () ->\n            this.fetchData()\n\n        filters: {\n            paginate: () ->\n                v = this\n                this.entries.filter((item) => item.page == v.currentPage)\n        },\n        computed: {\n            pageList: () ->\n                from = this.currentPage\n                from = Math.min(this.totalPages, this.currentPage + 3) - 3\n                from = Math.max(1, from)\n                Array.range(from, Math.min(this.currentPage + 3, this.totalPages))\n        },\n        methods: {\n            fetchData: (page) ->\n                v = this\n                if(!page)\n                    page = Math.ceil(this.entries.length / 16)\n\n                resource = this.$resource(apiURL)\n                resource.get(\n                    {_token: token, page: page},\n                    (data) ->\n                        console.log(data)\n                        page = data.meta.pagination.current_page\n                        v.totalPages = data.meta.pagination.total_pages\n                        v.pages.push(page)\n                        v.pages.sort()\n                        for entry in data.data\n                            entry.page = page\n                            v.entries.push(entry)\n                )\n            goToPage: (event, page) ->\n                event.preventDefault()\n                if (page == -1)\n                    this.currentPage = Math.max(1, this.currentPage - 1)\n                else if(page == 0)\n                    this.currentPage = Math.min(this.totalPages, this.currentPage + 1)\n                else\n                    this.currentPage = page\n\n                page = this.currentPage\n                if this.pages.indexOf(page) == -1\n                    this.fetchData(page)\n        },\n    })"],"sourceRoot":"/source/"}